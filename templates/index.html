{% extends "base.html" %}

{% block content %}
<h1>Welcome to the S&P 500 Dashboard</h1>
<p>The website aims to develop an Interactive Stock Market Visualization Tool to help users analyze historical stock market performance for the S&P 500 through a dynamic dashboard. 
    The site features historical stock data with interactive visualizations, such as time-series charts, comparative performance analysis, and a sector-based heatmap.</p>
<h2>What is the S&P 500?</h2>
<p>The S&P 500, or Standard & Poorâ€™s 500 Index, is one of the most prominent stock market indices, tracking the performance of approximately 500 of the largest publicly traded companies in the United States. 
    It is widely regarded as a benchmark for the overall U.S. stock market and economy due to its broad representation across all major sectors, including technology, healthcare, and finance.</p>

<div class="chart-container">
    <h2>Annual Return Bar Chart (S&P 500)</h2>
    <canvas id="barChart"></canvas>
</div>

<div class="chart-container">
    <h2>S&P 500 Candlestick Chart</h2>
    <canvas id="candlestickChart"></canvas>
</div>


</script> <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    fetch('/api/annual_returns_data')
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                console.error(data.error);
                alert("An error occurred: " + data.error);
            } else {
                const labels = data.labels;
                const returns = data.returns;

                const annualReturnsData = {
                    labels: labels,
                    datasets: [{
                        label: 'Annual Return (%)',
                        data: returns,
                        backgroundColor: returns.map(value => value < 0 ? 'rgba(255, 99, 132, 0.5)' : 'rgba(75, 192, 192, 0.5)'), // Red for negative, green for positive
                        borderColor: returns.map(value => value < 0 ? 'rgba(255, 99, 132, 1)' : 'rgba(75, 192, 192, 1)'), // Darker shades
                        borderWidth: 1
                    }]
                };

                const barChartOptions = {
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Year'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Annual Return (%)'
                            },
                            beginAtZero: true
                        }
                    },
                };

                const ctx = document.getElementById('barChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: annualReturnsData,
                    options: barChartOptions
                });
            }
        })
        .catch(error => {
            console.error("Error fetching data:", error);
            alert("A network error occurred.");
        });
</script>


{% endblock %}